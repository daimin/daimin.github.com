<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <title>预产期计算 - 在线工具</title>
    <meta name="keywords" content="预产期计算,怀孕计算">
    <meta name="description" content="预产期计算,怀孕计算，方便孕妈查询，安排自己的孕检时间">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
    <link href="https://s3.pstatp.com/cdn/expire-1-M/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/public/site/qetool/css/base.css" rel="stylesheet">
    <link href="/public/site/qetool/typo.css/typo.css" rel="stylesheet">
    <link rel="shortcut icon" href="http://test.qetool.com/favicon.ico">
    <script type="text/javascript" src="https://s1.pstatp.com/cdn/expire-1-M/jquery/2.2.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://s3.pstatp.com/cdn/expire-1-M/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap-hover-dropdown/2.2.1/bootstrap-hover-dropdown.min.js" type="application/javascript"></script>
    <script type="text/javascript" language="javascript" src="https://s0.pstatp.com/cdn/expire-1-M/bootbox.js/4.4.0/bootbox.min.js"></script>
    <script src="https://s2.pstatp.com/cdn/expire-1-M/lodash.js/2.0.0/lodash.min.js"></script>
    <script src="/public/site/qetool/js/common.js?v=MTYyNTA1OTIxOQ0K"></script>

    <style type="text/css">
        .ad-img{
            image-rendering:-moz-crisp-edges;
            image-rendering:-o-crisp-edges;
            image-rendering:-webkit-optimize-contrast;
            image-rendering: crisp-edges;
            -ms-interpolation-mode:nearest-neighbor;
            border:0;
        }
        .ad-link{
            position: absolute;
            top:10%;
            right:3%;
            display: none;
        }
        @media screen and (max-width: 768px){
            .ad-img{
                display: none;
            }
        }
        .dropdown-menu li{
            padding-top: .3rem;
            background-color: #fdfdfd;
            color: #4d4d4c;
        }
        .dropdown-menu li a:hover{
            background-color: #c4e3f3;
        }
    </style>
    
</head>
<body style="color:#000">
<div class="container-fluid w" style="margin-top: 0.8rem;">
    <nav class="navbar navbar-default head-navbar navbar-fixed-top" style="background-color:#fff;border-bottom:1px solid #ddd;">
        <div class="container-fluid" style="width: 90%">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <a class="navbar-brand" href="/">
                    <img class="logo-png" src="/public/site/qetool/img/logo.png">
                    <label class="logo-s-txt">在线工具</label>
                </a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li  class="active" ><a href="/">首页 <span class="sr-only">(current)</span></a></li>
                                        <li  class="dropdown">
                        <a href="/category/dev.html"  data-hover="dropdown" >开发类 <span class="caret"></span> </a>
                                                <ul class="dropdown-menu">
                                                            <li>
                                    <a href="/sql_json_go/sql.html">sql转golang struct</a>
                                </li>
                                                            <li>
                                    <a href="/sql_json_go/json.html">json转golang struct</a>
                                </li>
                                                            <li>
                                    <a href="/timestamp.html">时间戳转换</a>
                                </li>
                                                            <li>
                                    <a href="/json_editor.html">JSON在线编辑</a>
                                </li>
                                                            <li>
                                    <a href="/textjiami.html?jm=base64">Base64编码转换</a>
                                </li>
                                                            <li>
                                    <a href="/textjiami.html?jm=md5_encode">MD5/SHA加密</a>
                                </li>
                                                    </ul>
                                            </li>
                                        <li  class="dropdown">
                        <a href="/category/daily.html"  data-hover="dropdown" >日常类 <span class="caret"></span> </a>
                                                <ul class="dropdown-menu">
                                                            <li>
                                    <a href="/rand_passwd.html">密码生成</a>
                                </li>
                                                            <li>
                                    <a href="/gen_uuid.html">UUID生成</a>
                                </li>
                                                            <li>
                                    <a href="/num2zhdx.html">数字转中文大写</a>
                                </li>
                                                            <li>
                                    <a href="/img_compress.html">图片压缩</a>
                                </li>
                                                            <li>
                                    <a href="/zh_pinyin.html">汉字转拼音</a>
                                </li>
                                                            <li>
                                    <a href="/menstru_date.html">预产期计算</a>
                                </li>
                                                            <li>
                                    <a href="/baobaoshengao.html">宝宝身高</a>
                                </li>
                                                            <li>
                                    <a href="/smallgame/xinyoulingxi.html">随机成语猜猜猜</a>
                                </li>
                                                    </ul>
                                            </li>
                                    </ul>
                <form class="navbar-form navbar-right" onsubmit="return search_engine_search(this)">
<!--                    <select class="form-control input-sm" name="search_engine" style="padding: 5px 3px;">-->
<!--                        <option value="google">谷歌</option>-->
<!--                        <option value="baidu">百度</option>-->
<!--                    </select>-->
                    <div class="form-group" style="margin-left: -3px">
                        <input type="text" class="form-control" size="26" placeholder="在谷歌搜索本站..." name="search_text">
                    </div>

                    <button type="submit" class="btn btn-default glyphicon glyphicon-search" style="margin-left: -3px;top:0"><span style="position: relative;top: -1px;left:2px">搜索</span></button>
                </form>
                <ul class="nav navbar-nav navbar-right">
<!--                    <li><a href="#">Link</a></li>-->
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <script>
        jQuery(function () {
            let headNavbar = $($('.head-navbar').get(0))
            console.log(headNavbar.width())
            let docWid = document.documentElement.clientWidth;
            $("#ad-link-a").css("top", 80)
            $("#ad-link-a").css("left", (headNavbar.width() + (docWid - headNavbar.width())/2) + 42)
            $("#ad-link-a").show()
        })

        function search_engine_search(form){
            // let sevalue = form.search_engine.value;
            let svalue = form.search_text.value
            // if(sevalue == 'baidu'){
            //     window.location.href = "https://www.baidu.com/s?si=qetool.com&cl=3&ct=2097152&tn=bds&word="  + svalue;
            // }else if(sevalue == 'google'){
            //     window.location.href = "http://www.google.com/search?domains=qetool.com&sitesearch=qetool.com&hl=zh-CN&ie=UTF-8&oe=UTF-8&q="  + svalue;
            // }
            window.location.href = "http://www.google.com/search?domains=qetool.com&sitesearch=qetool.com&hl=zh-CN&ie=UTF-8&oe=UTF-8&q="  + svalue;
            return false
        }
    </script>
<script src="https://s2.pstatp.com/cdn/expire-1-M/moment.js/2.0.0/moment.min.js"></script>

<style>

    #hy-process {
        background-color: #96daed;
        display: block;
        padding-left: 0.5rem
    }
    #hy-process-div{
        border: 1px solid #63aabd;
        text-align: left;
        padding-left: 0;
        margin-left: 1.5rem;
        width: 20rem;
        display: none;
    }
    .hy-title{
        margin-bottom: 2rem;
        font-size: 3rem;
    }
    .var-span {
        color: #FF9A00;
        font-weight: bold;
        text-align: left;
    }
    @media screen and (max-width: 768px){
        .hy-title{
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        #hy-process-div{
            width: 12rem;
            margin-left: 0.8rem;
        }
        .var-span {
            font-size:0.1rem;
            font-weight: normal;
            padding-left: 0.6rem;
            padding-right: 0.6rem;
        }
    }

    .mens-select-div {
        display: inline-block;
    }

    .mens-select-div > select {
        padding: 0.2rem 0.5rem;
    }

    .label-span{
        display: inline-block;
        text-align: right;
    }


</style>
<div class="w2">
    <div class="row" style="text-align: center;margin-bottom: 1rem">
        <h2 class="hy-title">预产期计算</h2>
    </div>
    <div class="row" style="text-align: center;">
        <table class="rtable">
            <tr>
                <td class="r-label">末次月经日期</td>
                <td class="r-ctl">
                    <div class="mens-select-div">
                        <select id="mens_year">

                        </select>
                        年
                    </div>
                    <div class="mens-select-div">
                        <select id="mens_month">

                        </select>
                        月
                    </div>
                    <div class="mens-select-div">
                        <select id="mens_date">

                        </select>
                        日
                    </div>
                    <div>
                </td>
            </tr>
            <tr>
                <td class="r-label">计算结果</td>
                <td class="r-ctl" id="result1">
                    <div class="row"><span class="label-span col-xs-5">今天：</span><span class="var-span col-xs-7" id="now-date"></span></div>
                    <div class="row"><span class="label-span col-xs-5">预产期：</span><span class="var-span col-xs-7" id="prod-date"></span></div>
                    <div class="row"><span class="label-span col-xs-5">您已怀孕：</span><span class="var-span col-xs-7" id="hy-days"></span></div>
                    <div class="row"><span class="label-span col-xs-5">距离预产期：</span><span class="var-span col-xs-7" id="off-ycdate"></span></div>
                    <div class="row"><span class="label-span col-xs-5">怀孕进度：</span>
                        <div class="col-xs-7" id="hy-process-div">
                            <span class="var-span" id="hy-process"></span>
                        </div>
                    </div>
                    <div class="row"><span class="label-span col-xs-5">产检建卡日：</span><span class="var-span col-xs-7" id="jk-date"></span></div>
                </td>
            </tr>
        </table>
    </div>
    <div style="text-align: center;margin-top: 2rem">
        <button class="btn btn-info result-btn" onclick="MenstruDateChange()">计算</button>
    </div>

</div>
<script>
    //预产日期改变事件
    var MenstruDateChange = function () {
        //获取末次月经日期
        var menstruDate = $('#mens_year').val() + '-' + $('#mens_month').val() + '-' + $('#mens_date').val();
        //计算预产日期（方法一）
        var productDate1 = addDate1(menstruDate, 280);
        //计算预产日期（方法二）
        var productDate2 = addDate2(menstruDate, 10, 8);
        //设置预产日期
        $('#ProductDate1').val(productDate1);
        $('#ProductDate2').val(productDate2);
        let ndate = new Date();
        $('#now-date').html(ndate.getFullYear() + '-' + getFormatDate(ndate.getMonth() + 1) + '-' + getFormatDate(ndate.getDate()));
        $('#prod-date').html(productDate1);
        let offdays1 = moment().diff(moment(menstruDate), 'days');
        offdays1 = offdays1 < 0 ? 0 : offdays1
        offdays1 = offdays1 > 280 ? 0 : offdays1
        let offdays2 = parseInt((moment(productDate1).unix() - moment().unix()) / (3600 * 24));
        offdays2 = offdays2 > 280 ? 0 : offdays2
        offdays2 = offdays2 < 0 ? 0 : offdays2
        let process = offdays1 < 0 ? 0 : Math.round(offdays1 / 280 * 100, 0);
        process = process > 100 ? 100 : process
        $('#hy-days').html(offdays1+'天（第'+parseInt(offdays1/7)+'周 + '+offdays1%7+'天）');
        $('#off-ycdate').html(offdays2+'天');
        let hyProcess = $('#hy-process')
        hyProcess.html(process + '%');
        hyProcess.css({'width': process + '%'})
        if(process === 0) {
            hyProcess.css({'background-color': '#fff'})
        }else{
            hyProcess.css({'background-color': '#96daed'})
        }
        $("#hy-process-div").show()
        $('#jk-date').html(moment(menstruDate).add(12, 'weeks').format('YYYY-MM-DD'));
    }

    ///计算预产日期（方法一）
    //参数1：要转化日期
    //参数2：要添加的天数
    //注：（减去多少天，直接传递负数值）
    function addDate1(date, days) {
        //转化为日期对象
        var d = new Date(date);
        //设置日期（原有日期+增加的天数）
        d.setDate(d.getDate() + days);
        //获取计算后日期的年份
        var year = d.getFullYear();
        //获取计算后日期的月份
        var month = d.getMonth() + 1;
        //获取计算后日期的天数（多少号）
        var day = d.getDate();
        //拼接成日期格式
        var dateStr = year + '-' + getFormatDate(month) + '-' + getFormatDate(day);
        return dateStr;
    }

    //计算预产日期（方法二）
    //参数1：要转化的日期
    //参数2：增加的月份
    //参数3：增加的天数
    function addDate2(date, months, days) {
        //转化为日期对象
        var d = new Date(date);
        //设置日期（原有月份+增加的月份）
        d.setMonth(d.getMonth() + months);
        //设置日期（原有日期+增加的天数）
        d.setDate(d.getDate() + days);
        //获取计算后日期的年份
        var year = d.getFullYear();
        //获取计算后日期的月份
        var month = d.getMonth() + 1;
        //获取计算后日期的天数（多少号）
        var day = d.getDate();
        //拼接成日期格式
        var dateStr = year + '-' + getFormatDate(month) + '-' + getFormatDate(day);
        return dateStr;
    }

    //格式化日期的月份或天数的显示（小于10，在前面增加0）
    function getFormatDate(value) {
        if (value == undefined || value == "") {
            return '';
        }
        var str = value;
        if (parseInt(value) < 10) {
            str = '0' + value;
        }
        return str;
    }

    $(function () {
        let nd = new Date();
        let d = new Date(nd.getFullYear(), nd.getMonth()-3, nd.getDate());
        for(let i = 1950; i < 2050; i++){
            if(d.getFullYear() == i){
                $("#mens_year").append('<option value="'+i+'" selected>'+i+'</option>')
            }else{
                $("#mens_year").append('<option value="'+i+'">'+i+'</option>')
            }
        }
        for(let i = 1; i < 13; i++){
            if(d.getMonth() + 1 == i){
                $("#mens_month").append('<option value="'+i+'" selected>'+i+'</option>')
            }else{
                $("#mens_month").append('<option value="'+i+'">'+i+'</option>')
            }
        }

        for(let i = 1; i < 32; i++){
            if(d.getDate() == i){
                $("#mens_date").append('<option value="'+i+'" selected>'+i+'</option>')
            }else{
                $("#mens_date").append('<option value="'+i+'">'+i+'</option>')
            }
        }
    })

</script>
<style type="text/css">
    .ad-img2, .ad-img3{
        image-rendering:-moz-crisp-edges;
        image-rendering:-o-crisp-edges;
        image-rendering:-webkit-optimize-contrast;
        image-rendering: crisp-edges;
        -ms-interpolation-mode:nearest-neighbor;
        border:0;
    }
    .ad-link2{
        display: block;
        text-align: center;
    }
    @media screen and (max-width: 768px){
        .ad-img2{
            width:300px;
        }
        .ad-img3{
            width:100px;
        }
    }
</style>
<footer class="main-footer">
    <div class="foot w1000">
    </div>
</footer>
</div>
</body>
</html>