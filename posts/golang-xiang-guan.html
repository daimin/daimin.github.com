<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0025)http://daimin.github.io/ -->
<html>
<head>
    

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="keywords" content="golang相关" />
    <meta name="description" content="变量定义： 和其它语言不一样，它将类型放在后面，var a int ，它不需要分号。还可以这样声明：..." />
    <link rel="shortcut icon" href="/favicon.ico" />

    <title>golang相关 | 茶瓯葱丝</title>
    <link rel="stylesheet" type="text/css" href="/styles/style.css">
    <link rel="Stylesheet" type="text/css" href="/js/prettify/desert.css" />
    <link rel="stylesheet" type="text/css" href="/styles/bootstrap-jian.css">
    <script type="text/javascript"  src="/js/prettify/prettify.js"></script>
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://daimin.github.io/rss.xml">
</head>
<body>
		<div id="logo">
			<span id="motto"></span>
			<h1><a href="/index.html" >茶瓯葱丝</a>
            <form onsubmit="return dispatch()" style="display:inline">
            <span style="width: 240px; height: 26px; margin-left:24px; background-size: 240px 26px; background-image: url('/image/qbar_light@2x.png'); background-repeat: no-repeat; display: inline-block;">
            <input type="text" maxlength="40" name="q" id="q" value="">
            </span>
            </form>
            </h1>
            
        </div>
<div id="wrapper">
<div id="content" class="index">
     
<h2 class="post-title">golang相关</h2>
<div class="cnt">
<hr />
<ol>
<li>
<p>变量定义： </p>
<ul>
<li>
<p>和其它语言不一样，它将类型放在后面，<code>var a int</code> ，它不需要分号。还可以这样声明：</p>
<pre><code>var (
    v1 int
    v2 string
)
</code></pre>
</li>
<li>
<p>初始化：如下三种都是合法：</p>
<pre><code>var v1 int = 10
var v2 = 10 //编译器可以自动推导出类型
v3 := 10  //不需要var，声明和初始化一起，声明后的不能用:=初始化
* 赋值，它也支持这种 `i, j = j, i`，这里i和j就交换了值。
* 字符串类型必须是双引号
</code></pre>
</li>
</ul>
</li>
<li>
<p>常量</p>
<ul>
<li>字面常量就是硬编码的数字，字符串等等。</li>
<li>定义常量: <code>const A int = 1</code></li>
<li>枚举</li>
</ul>
<p>const (
    A = iota //在const使用重置为0
    B
)</p>
</li>
<li>
<p>数组</p>
<ul>
<li>golang的数组是大小不可以变的，定义的时候就要给定，<code>[32] byte</code></li>
<li>数组切片后就成了另外一个类型了：数组切片，这个时候大小就可以自动变化了。</li>
<li>数组遍历用range关键字，也可以用传统的for语句，推荐range</li>
<li>数组是值类型，赋值和参数传递的时候都会复制所有元素。</li>
<li>数组切片：myArray[:5]将数组切片，也可以make一个数组切片<pre><code>mys1 := make([]int, 5) // 初始值为0，初始大小为5
mys2 := make([]int, 5, 10) //初始值为0，初始大小为5，预留10个大小
mys3 := []int{1,2,3,4,5} //直接初始化一个包含5个元素的切片
* cap函数，返回数组(**这里的数组包括切片，下同**)大小;len函数返回当前的个数;append给数组添加元素
</code></pre>
</li>
</ul>
</li>
<li>
<p>map，键值对集合</p>
<ul>
<li><code>var myMap map[string] PersonInfo</code>，键类型是string，值类型为PersonInfo</li>
<li>make创建map：<code>myMap = make(map[string] PersonInfo, 100)</code>，创建map并指定初始大小</li>
<li>delete删除元素 <code>delete(myMap, "1234")</code>，删除键值"1234"的元素</li>
<li>
<p>查找</p>
<p>value, ok := myMap["1234"]
if ok { // finded
    // do what you want
}</p>
</li>
</ul>
</li>
<li>
<p>错误处理</p>
<ul>
<li>error接口，所有的错误都实现了这个接口</li>
<li>defer 相当于try...catch语句的finally。</li>
<li>panic打印错误，并终止流程，病返回调用函数处，由上层panic继续执行，知道goroutine被终止。</li>
</ul>
</li>
<li>
<p>接口</p>
</li>
<li>
<p>golang接口很宽松，只要实现了方法就算是实现了接口，并不需要显示的实现。</p>
</li>
<li>
<p>interface{} 表示any类型</p>
</li>
<li>
<p>类，golang的类就是结构体</p>
<ul>
<li>
<p>对象是引用类型，而结构体是值类型</p>
<p>//建立对象，它是引用类型（推荐，因为类一般比较大，引用省内存）
rect1 := new(Rect)
rect2 := &amp;Rect{}
rect3 := &amp;Rect{0, 0, 100, 200}
rect4 := &amp;Rect{width: 100, height:200}</p>
<p>// 也可以，它是值类型
rect = Rect{}
rect = Rect{0, 0, 100, 200}
rect = Rect{width: 100, height:200}</p>
</li>
<li>
<p>没有构造函数</p>
</li>
</ul>
</li>
<li>
<p>并发</p>
<ul>
<li>goroutine就是go实现的协程，语言级实现，函数调用前面加一个go关键字就是并发执行了。</li>
<li>golang的并发通讯，推荐channel，如：<code>ch := make(chan int)</code>，<code>ch &lt;- 1</code>表示向chan中写入1，<code>&lt;-ch</code>表示从chan中读取，在读取。写入后操作是阻塞的，直到被读取，读取钱读取也是阻塞的，知道被写入。</li>
<li><code>var ch2 chan&lt;- float64</code> 单向的channel，只能被写；<code>var ch3 &lt;-chan int</code>只能被读。</li>
<li>close(ch)关闭channel</li>
<li>多核运行，可能需要设置<code>runtime.GOMAXPROCS(16)</code> 16就是核心数</li>
<li>锁，实现并发通讯的另一种方式，原则上就是锁住共享内存</li>
<li>实现IPC就只有两种方式：<strong>共享内存</strong>和<strong>消息传递</strong>。</li>
</ul>
</li>
</ol>
<hr />
<blockquote>
<blockquote>
<blockquote>
<p>如上，先这样。。。</p>
</blockquote>
</blockquote>
</blockquote>
</dir>
<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="golang-xiang-guan" data-title="golang相关" data-url="/posts//data2/pyworks/daimin.github.com/posts/golang-xiang-guan.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"vagasnail"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->

</div>
<div id="footer">
	<span style="color:#bbb;font-size:12px">
	&copy; Powered by <a href="https://github.com/daimin/daimin.github.com" title="sologs">sologs</a> 
	</span>
	<p style="clear:both"></p>
</div>
</div>
<script type="text/javascript">
function hasClass(obj, cls) {  
    return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));  
}
function addClass(obj, cls) {  
    if (!this.hasClass(obj, cls)) obj.className += " " + cls;  
} 

function render_pretty(){
    var pres = document.getElementsByTagName("pre");
    for(var i = 0, len = pres.length; i < len; i++){
        addClass(pres[i], "prettyprint");
    }
    prettyPrint();

}

(function(){
   var mattos = [
   "人生没有对错，只有选择后的坚持，不后悔，走下去，就是对的。",
   "生活是一面镜子。你对它笑，它就对你笑；你对它哭，它也对你哭。",
   "宁愿做过了后悔，也不要错过了后悔。",
   "不要拿小人的错误来惩罚自己，不要在这些微不足道的事情上折磨浪费自己的宝贵时间。",
   "环境不会改变，解决之道在于改变自己。",
   "勇气是控制恐惧心理，而不是心里毫无恐惧。",
   "两个人共尝一个痛苦只有半个痛苦，两个人共享一个欢乐却有两个欢乐。",
   "好好管教自己，不要管别人。",
   "得之坦然，失之淡然，顺其自然，争其必然。",
   "人生是一条没有回程的单行线，上帝不会给你一张返程的票。",
   "把事情办好的秘密就是行动。成功之路就是有条理思考之后的行动！行动！行动！",
   "人生是一场旅行，在乎的不是目的地，是沿途的风景以及看风景的心情。",
   "放弃谁都可以，千万不要放弃自己！",
   "长得漂亮是优势，活得漂亮是本事。",
   "人生最大的错误是不断担心会犯错。",
   "一个人可以被毁灭，但不能给打败 -- 《老人与海》。",
   "要么不要开始，要么不要结束。",
   ];
   document.getElementById("motto").innerHTML = mattos[parseInt(Math.random() * mattos.length)];
   
})();

window.onload = function(){
   render_pretty();
};

var dispatch = function() {
    q = document.getElementById("q");
    if (q.value != "") {
        //window.open('http://www.baidu.com/s?si=daimin.github.io&cl=3&ct=2097152&tn=bds&word=' + q.value, "_blank");
        window.open('https://www.google.com.hk/search?q=site:daimin.github.io ' + q.value + '&gws_rd=cr,ssl', '_blank');
        return false;
    } else {
        return false;
    }
};

</script>
<script type="text/javascript" src="/js/jimdoclockzip.js"></script>
<script type="text/javascript">
var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5814730'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/stat.php%3Fid%3D5814730%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
</script>
    
</body>
</html>
